<!DOCTYPE html>
<html lang="ko">
    <head>
        <title>스윗카페</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="Css.css">
        <link rel="shortcut icon" href="photo/heart.png">
    </head>
    <body>
        <div class="upper">
            <a href="index.html" class="photo"><img class="logo" src="photo/logo.png"></a>
        </div>
        <div class="intro">
            <h1 class="notice_title">Notice!</h1>
            <h3 class="notice_ment">2학년 1반의 새콤달콤 스위트 게임 카페에 오신 것을 환영합니다!</h3>
            <h3 class="notice_ment">장난 주문은 하지말아주세요...!</h3>
            <h3 class="notice_ment">입력한 배달 장소에서 음료가 도착할 때까지 기다려주세요!</h3>
            <h3 class="notice_ment">확인 버튼을 누른 후 주문 완료 알림이 떠야 정상적으로 주문이 된겁니다. 주의하세요!</h3>
            <h3 class="notice_ment"></h3>
        </div>
        <div class="choice" id="choice">
            <div class="deliver">
                <br><a class="choice_ment">배달</a><br>
                <a class="explain">신속 정확 무료 배달</a><br><br>
                <input type="button" id="deliver_btn" class="deliver_btn" value="주문하기" />
            </div>
            <div class="reserve">
                <br><a class="choice_ment">예약</a><br>
                <a class="explain">기다리지 않게 미리 주문</a><br><br>
                <input type="button" id="reserve_btn" class="deliver_btn" value="예약하기"/>
            </div>
        </div>
        <center>
            <div class="deliver_input" id="deliver_input">
                <div id="inputInfo">
                    <h1 class="Mess">배달 주문</h1>
                    <a class="BoxText">학번을 입력하세요</a><br>
                    <input class="Box" id="deliver_Number" placeholder="학번" type="text" onclick=""></input><br><br>
                    <a class="BoxText">이름을 입력하세요</a><br>
                    <input class="Box" id="deliver_Name" placeholder="이름" type="text" onclick=""></input><br><br>
                    <a class="BoxText">현재 위치를 알려주세요</a><br>   
                    <input class="Box" id="deliver_Location" placeholder="예) 2학년 3반 교실" type="text" onclick=""></input><br><br>
                    <a class="BoxText">메뉴와 수량을 입력해주세요</a><br>
                    <input class="Box" id="deliver_Menu" placeholder="예) 청포도에이드 2잔, 핫초코 1잔" type="text" onclick=""></input><br><br>
                    <a class="BoxText">지불 방법을 알려주세요</a><br>
                    <input class="Box" id="deliver_Pay" placeholder="예) 현금 또는 계좌이체" type="text" onclick=""></input><br><br>
                    <input type="button" id="deliver_confirmBtn" class="confirm" value="확인" />
                    <input type="button" id="cancleBtn_1" class="cancle" value="취소" />
                </div>
            </div>
            <div class="reserve_input" id="reserve_input">
                <div id="inputInfo">
                    <h1 class="Mess">예약 하기</h1>
                    <a class="BoxText">학번을 입력하세요</a><br>
                    <input class="Box" id="reserve_Number" placeholder="학번" type="text" onclick=""></input><br><br>
                    <a class="BoxText">이름을 입력하세요</a><br>
                    <input class="Box" id="reserve_Name" placeholder="이름" type="text" onclick=""></input><br><br>
                    <a class="BoxText">방문할 시간을 알려주세요</a><br>   
                    <input class="Box" id="reserve_Time" placeholder="예) 9시 30분" type="text" onclick=""></input><br><br>
                    <a class="BoxText">메뉴와 수량을 입력해주세요</a><br>
                    <input class="Box" id="reserve_Menu" placeholder="예) 청포도에이드 2잔, 핫초코 1잔" type="text" onclick=""></input><br><br>
                    <input type="button" id="reserve_confirmBtn" class="confirm" value="확인" />
                    <input type="button" id="cancleBtn_2" class="cancle" value="취소" />
                </div>
            </div>
        </center>

        <center>
            <div class="menu_div">
                <h1 class="menu_title">MENU</h1>
                <h5 class="menu_title_under">*남은 수량은 실시간으로 업데이트 됩니다.*</h5>
                <h5 class="menu_title_under_2">*사진을 누르면 배달 주문 메뉴에 들어갑니다.*</h5>
                <a onclick="order_hotchoco()" class="order">
                    <div class="photo_1">
                        <img class="menu_photo" src="photo/hotchoco.png"><br><br>
                        <a class="menu_intro">핫초코</a><br>
                        <a class="menu_price">2000원</a><br>
                        <a class="menu_price">남은 수량 : </a>
                        <a class="menu_price" id="hotchoco_amount"></a>
                    </div>
                </a>
                <a onclick=order_bluecreamsoda() class="order">
                    <div class="photo_2">
                        <img class="menu_photo" src="photo/bluelemon.png"><br><br>
                        <a class="menu_intro">블루크림소다</a><br>
                        <a class="menu_price">3000원</a><br>
                        <a class="menu_price">남은 수량 : </a>
                        <a class="menu_price" id="bluecreamsoda_amount"></a>
                    </div>
                </a>
                <a onclick="order_minchoco()" class="order">
                    <div class="photo_3">
                        <img class="menu_photo" src="photo/mintchoco.png"><br><br>
                        <a class="menu_intro">민트초코우유</a><br>
                        <a class="menu_price">2000원</a><br>
                        <a class="menu_price">남은 수량 : </a>
                        <a class="menu_price" id="mintchoco_amount"></a>
                    </div>
                </a>
            </div>
            <div>
                <span class="blank"></span>
            </div>
            <div class="menu_div">
                <a onclick="order_lemonade()" class="order">
                    <div class="photo_1">
                        <img class="menu_photo" src="photo/lemonade.png"><br><br>
                        <a class="menu_intro">레몬에이드</a><br>
                        <a class="menu_price">2000원</a><br>
                        <a class="menu_price">남은 수량 : </a>
                        <a class="menu_price" id="lemonade_amount"></a>
                    </div>'
                </a>
                <a onclick="order_grapefruit()" class="order">
                    <div class="photo_2">
                        <img class="menu_photo" src="photo/grapefruit.png"><br><br>
                        <a class="menu_intro">자몽에이드</a><br>
                        <a class="menu_price">2000원</a><br>
                        <a class="menu_price">남은 수량 : </a>
                        <a class="menu_price" id="grapefruit_amount"></a>
                    </div>
                </a>
                <a onclick="order_greengrape()" class="order">
                    <div class="photo_3">
                        <img class="menu_photo" src="photo/greengrapeade.png"><br><br>
                        <a class="menu_intro">청포도에이드</a><br>
                        <a class="menu_price">2000원</a><br>
                        <a class="menu_price">남은 수량 : </a>
                        <a class="menu_price" id="greengrape_amount"></a>
                    </div>
                </a>
            </div>
            <div>
                <span class="blank"></span>
            </div>
            <div class="board_int">
                <h1 class="menu_title">보드게임</h1>
                <h5 class="menu_title_under">*보드게임은 2학년 1반에 와서 즐겨주세요!*</h5>
                <h5 class="menu_title_under_2">*사진을 누르면 게임에 대한 설명이 나옵니다.*</h5>
                <input type="button" id="board_btn" class="board_btn" value="보드게임 보기"/>
                <input type="button" id="boardphoto_btn" class="board_btn" value="사진 숨기기"/>
            </div>
            <div class="board_div" id="board_div_1">
                <a href="https://whoeye.tistory.com/10">
                    <div class="photo_1">
                        <img class="menu_photo" src="photo/marble.png"><br><br>
                        <a class="menu_intro">부루마블</a><br>
                    </div>
                </a>
                <a href="http://m.baduk.or.kr/story/G05.asp">
                    <div class="photo_2">
                        <img class="menu_photo" src="photo/badook.png"><br><br>
                        <a class="menu_intro">바둑(오목,알까기)</a><br>
                    </div>
                </a>
                <a href="https://www.chess.com/ko/tiesuwosuru">
                    <div class="photo_3">
                        <img class="menu_photo" src="photo/chess.png"><br><br>
                        <a class="menu_intro">체스</a><br>
                    </div>
                </a>
            </div>
            <div>
                <span class="blank"></span>
            </div>
            <div class="board_div" id="board_div_2">
                <a href="https://squirrel48.tistory.com/25">
                    <div class="photo_1">
                        <img class="menu_photo" src="photo/yut.png"><br><br>
                        <a class="menu_intro">윷놀이</a><br>
                    </div>
                </a>
                <a href="https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=silver5807&logNo=30189573784">
                    <div class="photo_2">
                        <img class="menu_photo" src="photo/monkey.png"><br><br>
                        <a class="menu_intro">텀블링몽키</a><br>
                    </div>
                </a>
                <a href="https://goodvi2be.tistory.com/22">
                    <div class="photo_3">
                        <img class="menu_photo" src="photo/hali.png"><br><br>
                        <a class="menu_intro">할리갈리</a><br>
                    </div>
                </a>
            </div>
            <div>
                <span class="blank"></span>
            </div>
            <div class="board_div" id="board_div_3">
                <a href="http://www.rummikub.co.kr/default/sub1/sub10.php">
                    <div class="photo_1">
                        <img class="menu_photo" src="photo/rummi.png"><br><br>
                        <a class="menu_intro">루미큐브</a><br>
                    </div>
                </a>
                <a href="https://tyrann0.tistory.com/23">
                    <div class="photo_2">
                        <img class="menu_photo" src="photo/clu.png"><br><br>
                        <a class="menu_intro">클루</a><br>
                    </div>
                </a>
                <a href="https://toronglife.tistory.com/109">
                    <div class="photo_3">
                        <img class="menu_photo" src="photo/ice.png"><br><br>
                        <a class="menu_intro">펭귄얼음깨기</a><br>
                    </div>
                </a>
            </div>
            <div>
                <span class="blank"></span>
            </div>
            <div class="board_div" id="board_div_4">
                <a href="https://brainterrace.tistory.com/44">
                    <div class="photo_1">
                        <img class="menu_photo" src="photo/monopoly.png"><br><br>
                        <a class="menu_intro">모노폴리</a><br>
                    </div>
                </a>
                <a href="https://ncms.nculture.org/folkplay/story/4383">
                    <div class="photo_2">
                        <img class="menu_photo" src="photo/air.png"><br><br>
                        <a class="menu_intro">공기놀이</a><br>
                    </div>
                </a>
                <a href="https://stopnow.tistory.com/entry/%EB%8B%A4%EB%B9%88%EC%B9%98-%EC%BD%94%EB%93%9C">
                    <div class="photo_3">
                        <img class="menu_photo" src="photo/davinch.png"><br><br>
                        <a class="menu_intro">다빈치코드</a><br>
                    </div>
                </a>
            </div>
            <div>
                <span class="blank"></span>
            </div>
            <div class="board_int">
                <h1 class="menu_title">게임</h1>
                <h5 class="menu_title_under">*게임은 2학년 1반에 와서 즐겨주세요!*</h5>
                <h5 class="menu_title_under_2">*사진을 누르면 게임에 대한 설명이 나옵니다.*</h5>
                <input type="button" id="game_btn" class="board_btn" value="게임 보기"/>
                <input type="button" id="gamephoto_btn" class="board_btn" value="사진 숨기기"/>
            </div>
            <div class="board_div" id="game_div">
                <a href="https://namu.wiki/w/%EC%B2%A0%EA%B6%8C%20%EC%8B%9C%EB%A6%AC%EC%A6%88/%EA%B8%B0%EB%B3%B8%20%EC%A1%B0%EC%9E%91%EB%B2%95">
                    <div class="photo_1">
                        <img class="menu_photo" src="photo/cheol.png"><br><br>
                        <a class="menu_intro">철권</a><br>
                    </div>
                </a>
                <a href="https://m.blog.naver.com/kimcoco1/221792594440">
                    <div class="photo_2">
                        <img class="menu_photo" src="photo/fifa.png"><br><br>
                        <a class="menu_intro">피파</a><br>
                    </div>
                </a>
                <a href="https://heartdream.tistory.com/7079">
                    <div class="photo_3">
                        <img class="menu_photo" src="photo/basketball.png"><br><br>
                        <a class="menu_intro">농구게임</a><br>
                    </div>
                </a>
            </div>
            <div>
                <span class="blank"></span>
            </div>
            <div>
                <span class="blank"></span>
            </div>
        </center>
        <div class="last">
            <br>
            <a class="choi">Follow Your Dream!</a>
        </div>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
          
            // Your web app's Firebase configuration
            const firebaseConfig = {
              apiKey: "AIzaSyB8PBuEsikHM9S0Q7Jn9gIVt6vXmQTU4Ak",
              authDomain: "daily-a5f34.firebaseapp.com",
              projectId: "daily-a5f34",
              storageBucket: "daily-a5f34.appspot.com",
              messagingSenderId: "999461733493",
              appId: "1:999461733493:web:67e9e2d8e04e4ee281643c"
            };
          
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);

            import {getDatabase, ref, set, child, remove, get} from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"

            const db = getDatabase();

            function readAmount(){
                const dbref = ref(db);

                get(child(dbref, "Amount/")).then((snapshot)=>{
                    var amount_hotchoco = snapshot.val().핫초코;
                    var amount_bluecreamsoda = snapshot.val().블루크림소다;
                    var amount_mintchoco = snapshot.val().민트초코;
                    var amount_lemonade = snapshot.val().레몬에이드;
                    var amount_grapefruit = snapshot.val().자몽에이드;
                    var amount_greengrape = snapshot.val().청포도에이드;

                    document.getElementById('hotchoco_amount').innerHTML = amount_hotchoco;
                    document.getElementById('bluecreamsoda_amount').innerHTML = amount_bluecreamsoda;
                    document.getElementById('mintchoco_amount').innerHTML = amount_mintchoco;
                    document.getElementById('lemonade_amount').innerHTML = amount_lemonade;
                    document.getElementById('grapefruit_amount').innerHTML = amount_grapefruit;
                    document.getElementById('greengrape_amount').innerHTML = amount_greengrape;
                });
            }
            
            readAmount();

            //배달 주문
            var deliver_number = document.getElementById("deliver_Number");
            var deliver_name = document.getElementById("deliver_Name");
            var deliver_location = document.getElementById("deliver_Location");
            var deliver_menu = document.getElementById("deliver_Menu");
            var deliver_confirm = document.getElementById("deliver_confirmBtn");
            var deliver_pay = document.getElementById("deliver_Pay");

            let tag = Math.random().toString(36).substr(2,11);

            function InsertDeliverData() {
                if (deliver_number.value===""){
                    alert("모든 값을 입력하세요.");
                } else if (deliver_menu.value===""){
                    alert("모든 값을 입력하세요.");
                } else if (deliver_name.value===""){
                    alert("모든 값을 입력하세요.");
                } else if (deliver_location.value===""){
                    alert("모든 값을 입력하세요.");
                } else if (deliver_pay.value===""){
                    alert("모든 값을 입력하세요.")
                } else {
                    set(ref(db, "Deliver/"+ tag),{
                    학번: deliver_number.value,
                    이름: deliver_name.value,
                    배달장소: deliver_location.value,
                    메뉴: deliver_menu.value,
                    결제수단: deliver_pay.value
                    })
                    .then(()=>{
                        alert("주문이 완료되었습니다.");
                        var input_number = document.getElementById("deliver_Number");
                        input_number.value = null;
                        var input_name = document.getElementById("deliver_Name");
                        input_name.value = null;
                        var input_location = document.getElementById("deliver_Location");
                        input_location.value = null;
                        var input_menu = document.getElementById("deliver_Menu");
                        input_menu.value = null;
                        var input_pay = document.getElementById("deliver_Pay");
                        input_pay.value = null
                        location.reload();
                    })
                    .catch((error)=>{
                        alert("오류 발생. 다시 시도하세요");
                    });
                }
            }
            
            deliver_confirm.addEventListener('click', InsertDeliverData);

            //예약 주문
            var reserve_number = document.getElementById("reserve_Number");
            var reserve_name = document.getElementById("reserve_Name");
            var reserve_time = document.getElementById("reserve_Time");
            var reserve_menu = document.getElementById("reserve_Menu");
            var reserve_confirm = document.getElementById("reserve_confirmBtn");

            function InsertReserveData() {
                if (reserve_number.value===""){
                    alert("모든 값을 입력하세요.");
                } else if (reserve_menu.value===""){
                    alert("모든 값을 입력하세요.");
                } else if (reserve_name.value===""){
                    alert("모든 값을 입력하세요.");
                } else if (reserve_time===""){
                    alert("모든 값을 입력하세요.");
                } else{
                    set(ref(db, "Reserve/"+ tag),{
                    학번: reserve_number.value,
                    이름: reserve_name.value,
                    예약시간: reserve_time.value,
                    메뉴: reserve_menu.value
                    })
                    .then(()=>{
                        alert("예약이 완료되었습니다.");
                        var input_reserve_number = document.getElementById("reserve_Number");
                        input_reserve_number.value = null;
                        var input_reserve_name = document.getElementById("reserve_Name");
                        input_reserve_name.value = null;
                        var input_reserve_time = document.getElementById("reserve_Time");
                        input_reserve_time.value = null;
                        var input_reserve_menu = document.getElementById("reserve_Menu");
                        input_reserve_menu.value = null;
                        location.reload();
                    })
                    .catch((error)=>{
                        alert("오류 발생. 다시 시도하세요");
                    })
                }
            }
            
            reserve_confirm.addEventListener('click', InsertReserveData);
          </script>
          <script type="text/javascript" src="Javascript.js"></script>
    </body>
</html>